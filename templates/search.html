{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h5 class="mb-0">TC ile Arama</h5>
  <a class="btn btn-outline-secondary" href="{{ url_for('agenda') }}">Gün Listesine Dön</a>
</div>

<form method="get" action="{{ url_for('search') }}" class="card card-body mb-3 d-flex gap-2 flex-row">
  <input name="tc" class="form-control" placeholder="TC girin" value="{{ tc or '' }}">
  <button class="btn btn-primary">Ara</button>
</form>

{% if tc and results|length == 0 %}
  <div class="alert alert-warning">Kayıt bulunamadı.</div>
{% endif %}

{% if results|length > 0 %}
  <div class="list-group">
    {% for r in results %}
      <div class="list-group-item {% if r.anesthesia %}anesthesia{% endif %}">
        <div class="d-flex justify-content-between">
          <div>
            <div><strong>{{ r.patient_name }}</strong> {% if r.patient_tc %}<span class="text-muted">— TC: {{ r.patient_tc }}</span>{% endif %}</div>
            <div class="small text-muted">
              Tarih: {{ r.date|tr_date }} • İşlem: {{ r.custom_proc_name or r.proc_name }}
            </div>
          </div>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('agenda', date=r.date) }}">Güne Git</a>
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
